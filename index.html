<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ–°åŒ—å¯¦å¢ƒé›†é»éŠæˆ²</title>
  <style>
    body { font-family: sans-serif; padding: 1em; background: #f4f4f4; }
    h1 { text-align: center; }
    .map {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-wrap: wrap;
      gap: 1em;
      margin-top: 2em;
    }
    .region {
      width: 100px; height: 100px;
      display: flex; justify-content: center; align-items: center;
      background-color: lightgray;
      border-radius: 8px;
      cursor: default;
      transition: 0.3s;
      font-weight: bold;
      box-shadow: none;
    }
    .region.completed {
      background-color: #ffcc00;
      box-shadow: 0 0 15px 5px rgba(255, 204, 0, 0.8);
    }
    .message {
      margin-top: 1em;
      text-align: center;
      font-size: 1.2em;
      color: green;
    }
  </style>
</head>
<body>
  <h1>æ–°åŒ—å¯¦å¢ƒé›†é»éŠæˆ²</h1>
  <div id="map" class="map"></div>
  <div id="message" class="message"></div>

  <script>
    const missions = {
      "mission1": { name: "é—œå¡ä¸€ï¼šæ–°èŠæ¢ç´¢", region: "æ–°èŠ" },
      "mission2": { name: "é—œå¡äºŒï¼šæ¿æ©‹ä»»å‹™", region: "æ¿æ©‹" },
      "mission3": { name: "é—œå¡ä¸‰ï¼šä¸‰é‡å¯†ç¢¼", region: "ä¸‰é‡" },
      "mission4": { name: "é—œå¡å››ï¼šæ–°åº—å†’éšª", region: "æ–°åº—" },
      "mission5": { name: "é—œå¡äº”ï¼šæ·¡æ°´æ¢ç§˜", region: "æ·¡æ°´" }
    };

    const completed = JSON.parse(localStorage.getItem("completedMissions")) || [];

    const urlParams = new URLSearchParams(window.location.search);
    const code = urlParams.get('code');
    const messageBox = document.getElementById("message");

    if (code && missions[code]) {
      if (!completed.includes(code)) {
        completed.push(code);
        localStorage.setItem("completedMissions", JSON.stringify(completed));
        messageBox.innerText = `ğŸ‰ æ­å–œå®Œæˆã€Œ${missions[code].name}ã€ï¼`;
      } else {
        messageBox.innerText = `âœ… ä½ å·²å®Œæˆã€Œ${missions[code].name}ã€`;
      }
    }

    const map = document.getElementById("map");
    for (const [code, data] of Object.entries(missions)) {
      const div = document.createElement("div");
      div.className = "region" + (completed.includes(code) ? " completed" : "");
      div.innerText = data.region;
      map.appendChild(div);
    }
  </script>
</body>
</html>
